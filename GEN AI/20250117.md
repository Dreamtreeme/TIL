## Transformer
- 병렬처리 (순차처리 x)
- 문맥 속에서 단어들 사이의 연관관계 파악
- 연관관계: 가까운 정도
- 인코더 : 대량의 데이터를 압축
  - 대량의 데이터 -> 어텐션 매커니즘 -> 모델
- 디코더: 일부분의 데이터(프롬프트) -> 모델 -> 응답

---
## Attention 매커니즘

스케일드 닷-프로덕트 어텐션:

쿼리(Q), 키(K), 값(V) 벡터를 사용하여 입력 시퀀스 내의 단어 간의 관계를 계산합니다.

쿼리와 키의 내적을 통해 유사도 점수(어텐션 스코어)를 계산하고, 키 벡터 차원의 제곱근으로 스케일링하여 안정성을 높입니다.

소프트맥스 함수를 사용하여 점수를 확률 분포로 변환하고, 값 벡터와 곱하여 가중 평균을 계산합니다. 이 결과가 최종 어텐션 값입니다.

수식: Attention(Q, K, V) = softmax(QKᵀ / √dₖ)V

멀티-헤드 어텐션:

스케일드 닷-프로덕트 어텐션을 여러 개 병렬로 사용하여 다양한 관점에서 입력 시퀀스를 분석합니다.

각 헤드는 입력된 Q, K, V를 각자의 변환 행렬(Wᵢ🇶, Wᵢᴷ, VWᵢⱽ)을 사용하여 변환한 후 스케일드 닷-프로덕트 어텐션을 수행합니다.

각 헤드의 출력을 연결(Concat)한 후 최종 변환 행렬(Wᴼ)을 곱하여 최종 출력을 생성합니다.

수식: MultiHead(Q, K, V) = Concat(head₁, head₂, ..., headₕ)Wᴼ where headᵢ = Attention(QWᵢ🇶, KWᵢᴷ, VWᵢⱽ)

---

## API (Application Programming Interface)
### 정의 : 다른 소프트웨어 구성 요소 또는 서비스와 상호 작용하기 위한 인터페이스를 제공하는 프로그래밍 기술

### 동작원리
    - 클라이언트가 HTTP 요청을 보내고
    - 서버는 HTTP 응답을 한다.
    - HTTP: 웹, 인터넷을 사용할 때 프로토콜
  
- 예시: 브라우저가 서버에게 GET또는 REST요청을 보내면 서버는 소스코드를 보내주고 브라우저가 그 소스코드를 랜더링해서 화면에 보여준다.

- 다른예시: 소셜 로그인, 날씨 API, SDK
  
#### API는 
    1. 어떤 요청을 보내면 어떤 데이터가 오는지 원리를 파악하고
    2. 받아오는 데이터를 어떻게 활용할것인지 설계해야한다.

### API KEY
- API는 기능이자 자산(가치가 높음), 비용이 발생
- Weather API 같은 경우 무절제하게 요청을 하면 서버에 과부하
- 때문에 API KEY를 발급해 사용량을 제한해서 서버의 과부화를 막고 인증받은 사용자만 정보에 접근할 수 있게한다.
- 보안관리와 비용관리가 핵심
- **절대 API KEY를 GITHUB에 공용으로 노출시키지 말자!**

---

## CHAT GPT 챗봇

1. 동작원리
  웹 페이지 로드: HTML, CSS, JavaScript 로드 및 초기화.
  사용자 입력: 메시지 입력 창에 텍스트 입력 후 Enter 키 입력.
  이벤트 발생: keyup 이벤트 발생 및 이벤트 리스너 실행.
  메시지 전송: chatSubmit 함수 호출 -> 사용자 메시지 화면에 표시 -> chatReceive 함수 호출 -> ChatGPT API에 요청 전송.
  챗봇 응답: ChatGPT API에서 응답 반환.
  응답 처리: (미완성 부분) 응답 메시지 화면에 표시.
  대화 반복: 2~6단계 반복.
2. 채팅 메시지 관리 및 화면 표시:

  addChat(type, value) 함수: 이 함수는 채팅 메시지를 화면에 추가하는 핵심 기능을 담당합니다.
  type 인자를 통해 메시지가 사용자가 보낸 것인지 (send-chat) 챗봇이 보낸 것인지 (receive-chat) 구분합니다.
  새로운 메시지 요소를 생성하고, 메시지 내용을 설정하며, 해당 메시지를 채팅 영역에 추가합니다.
  채팅 내용이 길어져 스크롤이 생길 경우, 스크롤을 맨 아래로 이동시켜 최신 메시지가 항상 보이도록 합니다.
  요약: addChat 함수는 채팅 메시지를 동적으로 생성하고 관리하여 사용자와 챗봇 간의 대화 흐름을 시각적으로 보여주는 역할을 합니다.

3. 챗봇과의 통신 (ChatGPT API 연동):

  chatReceive(userMsg) 함수: 이 함수는 사용자의 메시지를 챗봇 서버(ChatGPT API)에 전송하고 응답을 받는 기능을 담당합니다.
  axios.post()를 사용하여 ChatGPT API에 POST 요청을 보냅니다.
  요청에는 API 키, 모델 정보 (gpt-3.5-turbo), 그리고 메시지 내용이 포함됩니다.
  API 응답을 받으면 응답 메시지를 추출하여 addChat 함수를 통해 화면에 표시해야 합니다. 또한, 이전 챗봇 응답을 저장하여 대화의 맥락을 유지해야 합니다.
  chatSubmit() 함수: 사용자가 메시지를 입력하고 Enter 키를 눌렀을 때 실행되는 함수입니다.
  입력된 메시지를 가져와 addChat 함수를 사용하여 화면에 표시합니다.
  chatReceive 함수를 호출하여 챗봇 서버에 메시지를 전송합니다.
  이벤트 리스너 (chatInput.addEventListener('keyup', ...)): 사용자가 메시지 입력 창에서 Enter 키를 눌렀는지 감지합니다. Enter 키가 눌리면 chatSubmit() 함수를 호출하여 메시지 전송 과정을 시작합니다.
  요약: 이 부분은 사용자의 입력과 챗봇의 응답을 연결하는 핵심 부분입니다. chatReceive 함수는 API 통신을 담당하고, chatSubmit 함수는 사용자의 입력을 처리하고 API 호출을 시작하며, 이벤트 리스너는 사용자의 Enter 키 입력을 감지하여 전체적인 흐름을 제어합니다.

4. 예시
  입력: "오늘 점심 메뉴 추천해줘"
  답변: {
    "id": "chatcmpl-AqWLeKjv5Y4z2goNVLWvZxrh7n363",
    "object": "chat.completion",
    "created": 1737080766,
    "model": "gpt-3.5-turbo-0125",
    "choices": [
        {
            "index": 0,
            "message": {
                "role": "assistant",
                "content": "닭갈비, 된장찌개, 샐러드, 김자반, 밥, 깍두기로 구성된 한식 세트를 추천해드립니다. 식사 후 달달한 과일로 디저트를 즐기시면 좋을 것 같아요. bon appétit!",
                "refusal": null
            },
            "logprobs": null,
            "finish_reason": "stop"
        }
    ],
    ...
}

이 데이터가 res.data에 저장되고 res.data.choices[0].message.content로 자연어 답변에 접근할 수 있다.

---


### 프롬프트 엔지니어링 6가지 요소

- **Task(작업): 한번에 하나의 구체적인 작업을 시킨다**
- **Context(문맥): 작업과 관련된 상황을 자세히 설명할 수록 좋다**
- **Persona(역할): 역할부여**
  - ex 10년동안 무사고 경력을 가진 레이서
- **Example(예시) : 예시를 제시하면 그 예시와 비슷하게 만들어줌.**
- Format(형식) : 지정된 형식으로 만들어줌.
- Tone(어조) : 친절하게, 엄격하게 등